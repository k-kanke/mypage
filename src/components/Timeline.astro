---
const { items } = Astro.props;

const formatRange = (item) => {
	if (item.to && item.to !== '') {
		return `${item.from} - ${item.to}`;
	}
	return item.from;
};
---

<section class="card timeline">
	<h2>Timeline</h2>
	<ol class="timeline-list">
		{items.map((item) => (
			<li>
				<time>{formatRange(item)}</time>
				<div>
					<h3>{item.title}</h3>
					{item.Content ? <item.Content /> : <p>{item.description}</p>}
				</div>
			</li>
		))}
	</ol>
</section>

<style>
	.card {
		background: #ffffff;
		border-radius: 20px;
		padding: 28px 32px;
		border: 1px solid rgba(30, 30, 30, 0.06);
		box-shadow: 0 12px 30px rgba(30, 30, 30, 0.06);
	}

	.card h2 {
		margin: 0 0 16px;
		font-size: 16px;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		color: #515151;
	}

	.timeline-list {
		list-style: none;
		margin: 0;
		padding: 0;
		position: relative;
		display: grid;
		gap: 24px;
		--time-col: 120px;
		--line-x: calc(var(--time-col) + 12px);
	}

	.timeline-list::before {
		content: '';
		position: absolute;
		left: var(--line-x);
		top: 6px;
		bottom: 6px;
		width: 2px;
		background: linear-gradient(180deg, #c9d4d4 0%, #cfe0d3 100%);
	}

	.timeline-list li {
		display: grid;
		grid-template-columns: var(--time-col) 1fr;
		gap: 28px;
		align-items: start;
		position: relative;
	}

	.timeline-list li::before {
		content: '';
		position: absolute;
		left: calc(var(--line-x) - 8px);
		top: 6px;
		width: 16px;
		height: 16px;
		border-radius: 50%;
		background: #1b4c4c;
		box-shadow: 0 0 0 6px rgba(27, 76, 76, 0.15);
	}

	.timeline-list time {
		font-family: 'IBM Plex Mono', 'Noto Sans JP', monospace;
		font-size: 11px;
		letter-spacing: 0.08em;
		color: #6a6a6a;
		display: block;
		text-align: right;
		padding-right: 24px;
	}

	.timeline-list h3 {
		margin: 0 0 6px;
		font-size: 16px;
		font-family: 'Fraunces', 'Noto Serif JP', serif;
		letter-spacing: 0.01em;
	}

	.timeline-list p {
		margin: 0;
		font-size: 14px;
		font-family: 'Fraunces', 'Noto Serif JP', serif;
		letter-spacing: 0.008em;
		line-height: 1.7;
		color: #3f3f3f;
	}

	.timeline-list ul {
		margin: 0;
		padding-left: 18px;
		display: grid;
		gap: 6px;
	}

	.timeline-list ul,
	.timeline-list li ul li {
		color: #3f3f3f;
		font-family: 'Fraunces', 'Noto Serif JP', serif;
		letter-spacing: 0.008em;
	}

	.timeline-list li ul li {
		list-style: disc;
	}

	.timeline-list li > div {
		padding-left: 8px;
	}

	@media (max-width: 640px) {
		.card {
			padding: 28px 24px;
		}

		.timeline-list::before {
			left: 16px;
		}

		.timeline-list li {
			grid-template-columns: 1fr;
			padding-left: 32px;
		}

		.timeline-list li::before {
			left: 8px;
		}
	}
</style>
