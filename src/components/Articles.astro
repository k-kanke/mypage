---
const { items } = Astro.props;

const formatDate = (date) =>
	new Intl.DateTimeFormat('ja-JP', {
		year: 'numeric',
		month: '2-digit',
		day: '2-digit',
	}).format(date);
---

<section class="card articles">
	<h2>Articles</h2>
	{items.length ? (
		<div class="list">
			{items.map((article) => (
				<article class="article">
					<p class="article-date">{formatDate(article.publishedAt)}</p>
					<h3>
						<a href={article.url} target="_blank" rel="noreferrer">{article.title}</a>
					</h3>
					{article.Content ? <article.Content /> : null}
					{article.tags?.length ? (
						<div class="tag-list" role="list">
							{article.tags.map((tag) => (
								<span class="tag" role="listitem">{tag}</span>
							))}
						</div>
					) : null}
				</article>
			))}
		</div>
	) : (
		<p class="empty">`src/content/articles` に記事を追加するとここに表示されます。</p>
	)}
</section>

<style>
	.card {
		background: #ffffff;
		border-radius: 20px;
		padding: 28px 32px;
		border: 1px solid rgba(30, 30, 30, 0.06);
		box-shadow: 0 12px 30px rgba(30, 30, 30, 0.06);
	}

	.card h2 {
		margin: 0 0 16px;
		font-size: 16px;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		color: #515151;
	}

	.list {
		display: grid;
		gap: 14px;
	}

	.article {
		padding: 14px 16px;
		border-radius: 14px;
		border: 1px solid rgba(30, 30, 30, 0.08);
		background: rgba(250, 250, 250, 0.9);
	}

	.article-date {
		margin: 0 0 8px;
		font-size: 11px;
		font-family: 'IBM Plex Mono', 'Noto Sans JP', monospace;
		letter-spacing: 0.08em;
		color: #6a6a6a;
	}

	.article h3 {
		margin: 0 0 8px;
		font-size: 16px;
		font-family: 'IBM Plex Sans', 'Noto Sans JP', sans-serif;
		font-weight: 400;
	}

	.article h3 a {
		color: #3f3f3f;
		text-decoration: none;
	}

	.article h3 a:hover {
		text-decoration: underline;
	}

	.article p {
		margin: 0 0 10px;
		font-size: 13px;
		line-height: 1.7;
		color: #3f3f3f;
	}

	.article :global(p) {
		margin: 0 0 10px;
		font-size: 13px;
		line-height: 1.7;
		color: #3f3f3f;
	}

	.tag-list {
		margin: 0;
		display: flex;
		flex-wrap: wrap;
		gap: 6px;
	}

	.tag {
		font-size: 11px;
		font-family: 'IBM Plex Mono', 'Noto Sans JP', monospace;
		letter-spacing: 0.05em;
		padding: 3px 10px;
		border-radius: 999px;
		background: #ffffff;
		border: 1px solid rgba(40, 40, 40, 0.14);
		color: #4a4a4a;
	}

	.empty {
		margin: 0;
		font-size: 13px;
		color: #6a6a6a;
	}

	@media (max-width: 640px) {
		.card {
			padding: 22px 20px;
		}
	}
</style>
